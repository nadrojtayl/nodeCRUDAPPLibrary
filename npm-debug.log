0 info it worked if it ends with ok
1 verbose cli [ '/usr/local/bin/node', '/usr/local/bin/npm', 'publish' ]
2 info using npm@2.15.8
3 info using node@v4.4.7
4 verbose publish [ '.' ]
5 silly cache add args [ '.', null ]
6 verbose cache add spec .
7 silly cache add parsed spec Result {
7 silly cache add   raw: '.',
7 silly cache add   scope: null,
7 silly cache add   name: null,
7 silly cache add   rawSpec: '.',
7 silly cache add   spec: '/Users/jordantaylor/Desktop/libraries/superfastmongoexpress',
7 silly cache add   type: 'directory' }
8 verbose addLocalDirectory /Users/jordantaylor/.npm/superfastmongoexpress/1.0.7/package.tgz not in flight; packing
9 verbose correctMkdir /Users/jordantaylor/.npm correctMkdir not in flight; initializing
10 verbose tar pack [ '/Users/jordantaylor/.npm/superfastmongoexpress/1.0.7/package.tgz',
10 verbose tar pack   '/Users/jordantaylor/Desktop/libraries/superfastmongoexpress' ]
11 verbose tarball /Users/jordantaylor/.npm/superfastmongoexpress/1.0.7/package.tgz
12 verbose folder /Users/jordantaylor/Desktop/libraries/superfastmongoexpress
13 info prepublish superfastmongoexpress@1.0.7
14 verbose addLocalTarball adding from inside cache /Users/jordantaylor/.npm/superfastmongoexpress/1.0.7/package.tgz
15 verbose correctMkdir /Users/jordantaylor/.npm correctMkdir not in flight; initializing
16 silly cache afterAdd superfastmongoexpress@1.0.7
17 verbose afterAdd /Users/jordantaylor/.npm/superfastmongoexpress/1.0.7/package/package.json not in flight; writing
18 verbose correctMkdir /Users/jordantaylor/.npm correctMkdir not in flight; initializing
19 verbose afterAdd /Users/jordantaylor/.npm/superfastmongoexpress/1.0.7/package/package.json written
20 silly publish { name: 'superfastmongoexpress',
20 silly publish   version: '1.0.7',
20 silly publish   description: 'Abstract all the boilerplate needed to set up an express-mongo server into a single line of code',
20 silly publish   main: 'main.js',
20 silly publish   dependencies:
20 silly publish    { 'body-parser': '^1.15.2',
20 silly publish      express: '^4.14.0',
20 silly publish      mongoose: '^4.7.4',
20 silly publish      request: '^2.79.0',
20 silly publish      fs: '^0.0.1-security' },
20 silly publish   devDependencies: {},
20 silly publish   scripts: { test: 'echo "Error: no test specified" && exit 1' },
20 silly publish   repository:
20 silly publish    { type: 'git',
20 silly publish      url: 'git+https://github.com/nadrojtayl/nodeCRUDAPPLibrary.git' },
20 silly publish   author: '',
20 silly publish   license: 'ISC',
20 silly publish   bugs: { url: 'https://github.com/nadrojtayl/nodeCRUDAPPLibrary/issues' },
20 silly publish   homepage: 'https://github.com/nadrojtayl/nodeCRUDAPPLibrary#readme',
20 silly publish   readme: '\n###Superfastmongoexpress sets up your mongoDB tables--and an Express server that lets you manipulate the documents in your tables from your html code-- in a single line of Express code\n1. Builds tables based on a simple schema definition\n2. Sets up endpoints on an Express server to CRUD the documents in your tables\n3. Uses server side scripting to set up helpers that CRUD your new mongo entities client-side\n\n###Example: BUILD OUT THE DB AND SERVER FOR A SOCIAL MEDIA APP WITH USERS AND MESSAGES\n\tRequire the library:\n\t     -var dbHelper = require("superfastmongoapp")\'\'\'\n\tSet up the schema by calling the createSchema method\n\t     dbHelper.createSchema({Message:{user:"Mike",message:"I am a dog"},User:{name:"Mike"}},{User:["Message"]});\n\n\t(The first argument to schema should be an object. Keys are the names of tables you want created, values are examples of the kinds of objects that table should hold)\n\n\tTo create a User table with a name column you would run \n\t     dbHelper.createSchema({User:{name:"Bobby"}})\n\n\tYour server will automatically have endpoints that CREATE READ UPDATE and DELETE the models you created\n\n\t     -Make a get request to the endpoint /getAllMessages to get all messages from your server\n\n\t     -Make a post request to the endpoint /getSpecificMessage to get a specific Message\n\n\t-Any html files you serve from your server with the "sendFilewithDBMethods" method on the helper automatically has helper functions available to CRUD any endpoints:\n\n\t     Example: In your express server, serve all files in response to requests with the sendFileWithDBMethods method\n\n         app.get("/dbtest",function(req,res){\n\t       dbHelper.sendFileWithDBMethods(__dirname + "/test.html",res);\n         })\n\n         The method takes the html file as its first argument, and the response as its second\n\n     In your html files, you now have a helper to CRUD every entity you created. The helpers are on a globally defined object called "db"\n         Example html code to add a message from the client side:\n\t\t<html>\n\t\t<head>\n\t\t\t<script>\n\t\t\t    db.addMessage({user:Ben,message:"This is an example"})\n\t\t\t    //The above code posts to your db\n\t\t\t    db.getAllMessages({});\n\t\t\t    //This will return all the messages that have been posted\n\t\t\t<script>\n\t\t</head>\n\t\t<body>\n\t\t</body>\n\t\t</html>\n\n\t Focus on your client side code because DB and server setup is done\n\n     Here\'s the full list of all client-side helpers available to you (Replace "modelName" with the name of any of the models you created during schema setup):\n\n\t\t\tdb.addmodelName(object) -> adds document to table \n\t\t\t(Ex: addUser({name:"Jerry"}))\n\t\t\tdb.deletemodelName(object) -> deletes document from table \n\t\t\t\t(Ex: deleteUser({name:"Jerry"}))\n\t\t\tdb.getAllmodelNames() -> gets all documents from table \n\t\t\t(Ex: getAllUsers())\n\t\t\tdb.getSpecificmodelName(object) -> gets documents matching object from table\n\t\t\t(Ex: getSpecificUser({name:"Jerry"}))\n\t\t\tdb.updatemodelName(object with properties \'find\' and \'change\') -> updates single document matching object assigned to "find" to match object assigned to "change"\n\t\t\t\t(Ex: updateUser(find:{name:"Jerry"},change:{name:"Bob"})))\n\n\n##LONGER INSTRUCTIONS:\n**Note** If you want to know how to add foreign keys or relationships between tables, skip to the foreign keys section on line 95\n\n\n-Many applications use an express server and Mongoose to do the simple action of allowing CRUD operations (CREATE READ UPDATE DELETE) on models in your database. This library gets rid of all the boilerplate.\n\n\n-To set up an app follow these 7 steps\n1) npm install express and create an express app instance\nvar express = require("express");\nvar app = express();\n2) npm install "mongoose" and connect your mongoose instance to your mongo server\nmongoose.connect(\'mongodb://localhost/test\');\n3) Create the helper by requiring this library: \nvar helper =  require("superfastmongoExpresssetup");\n4) Connect the helper to your express app by inserting the app object, the port your app will listen on, and (optionally) the IP address of the machine that will host your app\n-with IP address: \nhelper(app,port,"10.8.25.40");\n-without:\nhelper(app,port)\nNote: If you are deploying your app you must insert the ip address of the machine it will be running on. If you\'re creating a test app, or running locally, its fine to leave IP blank (as the library will find your IP address on the network you are on and insert it)\n\nSuperfastexpressmongoApp needs your IP address because it is going to insert helper methods into the html files you serve from your express server.\n\n5) Create a new dbHelper by attaching your mongoose instance to the helper\nvar dbHelper = helper.addDBconnection(mongoose);\n6)Create a schema for your app by using the createSchema method. This function establishes a mongoDB schema based on a simple command. The first argument to the function sets up the entities you want in your schema: pass an object, where each key is the name of the table you want in your schema, and each value is a (nested) object and an example of the kinds of objects you want that table to hold.\n\nExample:\nCreate a users table and a messages table, where Users have a name and messages have a message and a time.\ndbHelper.createSchema({\nMessage:{time:"10 AM",message:"This is an example"},\nUser:{name:"Brian"}\n});\n\nFOREIGN KEYS: Use the (optional) second argument to createSchema to establish relationships between your tables. You do not need to specify foreignkeys or relationships in the first argument. For the second argument, input an object, where each key is the name of a table, and each value is an array containing the names of the other tables you want it to have a one to many connection to.\n\nFor example, if your app has Users and messages, each User probably has many Messages. You may want to establish a relationship between the User and Messages table so you can easily find all messages from a certain User. In Mongoose, you accomplish this by putting a foreign key on each message that represents the id of the User that posted the message.\n\nIts very easy to accomplish this using this library. If you want each Message to contain an ID for the user who wrote the message, create your schema like this:\n\nvar schema = {Message:{user:"Mike",message:"I am a dog"},User:{name:"Mike"}};\nvar relationships = {User:["Message"]}\n\ndbHelper.createSchema(schema,relationships);\n\nAs stated, in the relationships object, make a key for every table that you want to have a one to many relationship with another table. The value for that key should be an array containing the names, as strings, of all tables that the key table should have a relationship to.\n\nIf you wanted users to be able to post submessages in response to messages, you might make your schema like this.\n\nvar schema = {\nMessage:{user:"Mike",message:"I am a dog"},\nUser:{name:"Mike"},\nsubMessage:{message:"This is a sub-comment"}\n};\n\nvar relationships = {\nUser:["Message","subMessage"],\nMessage:["subMessage"]\n}\n\ndbHelper.createSchema(schema,relationships);\n\nThis way each submessage will have reference to both the User who posted it and the message it is under.\n\nSee below to see how to post documents to tables that have relationships to other tables.\n\n7)That\'s it. When you run your server, the helper will create your schema, and create endpoints to Create, Read, Update and Delete the documents in each table you created. \n\nYou can also serve files in your express app using the db.sendFileWithDBMethods method to make manipulating your database from your client side code extremely easy. \n\n**\nWhen you serve your files using db.sendFileWithDBMethods, you will have access in your html code to a set of helpers that-- for each of your new tables-- will CREATE, READ, UPDATE AND DELETE documents in that table**:\n\nExample of serving a file using sendFileWithDBMethods:\nvar dbHelper = require("superfastmongoapp")\nvar mongoose = require("mongoose");\nmongoose.connect(\'mongodb://localhost/test3\');\nvar dbHelper = helper.addDBconnection(mongoose);\nvar schema = {\nUser:{name:"Mike"},\nMessage:{user:"Mike",message:"I am a dog"},\nsubMessage:{name:"Brian",message:"This is a test"\n};\nvar relationships = {User:["Message","subMessage"],Message:["subMessage"]};\n\ndbHelper.createSchema(schema,relationships);\n\n\napp.get("/",function(req,res){\ndbHelper.sendFileWithDBMethods(__dirname + "/homepage.html",res);\n})\n\nThe secndFileWithDBMethods function takes the absolute path to an html file as its first argument, and the response as its second.\n\nThen, in test.html, you will have access to a bunch of helper functions on an object called "db" to CRUD every document in your table. For example, to add Messages to your database, you could write client code like this:\n\n<html>\n<head>\n<script>\n    db.addMessage({user:Ben,message:"This is an example"})\n    //The above code posts to your db\n    db.getAllMessages({});\n    //This will return all the messages that have been posted\n<script>\n</head>\n<body>\n</body>\n</html>\n\nYou could do something like this to allow your user to send a message by entering text in an input and clicking a button:\n<html>\n<head>\n\n</head>\n<body>\n<input id="message"></input>\n<button onclick = "postMessage()">Add message</button>\n<script>\nfunction postMessage(){\n//get message using jquery\nvar messageString = $("#message").text()\n\n//post using db helper\ndb.addMessage({user:"Testuser",message:messageString})\n}\n<script>\n</body>\n</html>\n\nIn your html files, the helpers for each table will be available on an object called "db." Here\'s the full list of helper functions. You will have one of these function for each table (replace [tableName] with the name of your table) you created:\n\ndb.add[tableName](object) -> adds document to table \n(Ex: addUser({name:"Jerry"}))\ndb.delete[tableName](object) -> deletes document from table \n\t(Ex: deleteUser({name:"Jerry"}))\ndb.getAll[tableName]s() -> gets all documents from table \n(Ex: getAllUsers())\ndb.getSpecific[tableName](object) -> gets documents matching object from table\n(Ex: getSpecificUser({name:"Jerry"}))\ndb.update[tableName](object with properties \'find\' and \'change\') -> updates single document matching object assigned to "find" to match object assigned to "change"\n\t(Ex: updateUser(find:{name:"Jerry"},change:{name:"Bob"})))\n\nINSERTING TO TABLES WITH FOREIGN KEYS\n\nIf you specified a table as having a many to one relationship to another table, the library provides you an extra helper for that test to add a new document to that table while specifying what documents in other tables it should be associated with. For example, if you created a Messages table for messages posted by Users, you need a way to post your Messages while specifiying what User is posting it.\n\nThis method is called "db.add[tableName]for[relatedTableName]"\n\nFor the example above, if you created a Users table and a Messages table, the function to add a Message for a certain User would be called\ndb.addMessageforUser\n\nThe function takes as an argument an object with two keys:\n\nrelatedInfo: An object whose keys are the names of the tables your table is related to (for example "User") and whose values are objects representing the document in that table you want to associate your new document with\n\ntoPost: An object representing the new document to add to the table\n\nSo, for example, to post a new Message to the Messages table associated with the User Ben, you do:\n\n<script>\nvar rf = {User:{name:"Jordan"}}\nvar newmodel = {user:"Jordan",message:"This is an example"};\n\ndb.addMessageforUser({relatedInfo:rf,toPost:newModel});\n</script>\n\nIf the table is related to more than one table, than the method is called db.add[tableName]for[relatedTable1]and[relatedTable2]and[relatedTable3]...\n\nSo, if you have a subMessage table, where each subMessage is associated with a certain User and a Message, the client side function to add a subMessage is called.\n\ndb.addsubMessageforUserandMessage\n\nAnd to add a submessage you could run this code\n\n<script>\nvar relatedUser = {User:{name:"Jordan"}}\nvar relatedMessage = {user:"Jordan",message:"This is the main message"}\nvar newsubComment = {user:"Jordan",message:"This is an example"};\n\ndb.addsubMessageforUserandMessage({\n\trelatedInfo{User:relatedUser,Message:relatedMessage},\n\ttoPost:newsubComment\n})\n</script>\n\nTo get all the documents in a table related to a document in another table,\tyou need to get the mongoID (always called _id) of the document from one table using the getSpecific[tableName] function, and then get all the documents from another table that have that ID as their _[tableName] property.\t\n\nFor example, to get all the Messages a specific User posted, you would:\n\n1)Find that user\'s ID using getSpecificUser\n\n//ex: db.getSpecificUser({name:Jordan}) -> [{name:Jordan,_id:"1234"}];\n// var id = db.getSpecificUser({name:Jordan})._id;\n\n2)Use getSpecificMessage to find Messages who\'s _User property matches that id\n\n//db.getSpecificMessage({_User:id}) -> All messages posted by Jordan\n\nDocuments in a table in a many to one relationship with another table--for example "relatedTable" will always have a property called _[relatedTableName]. That\'s what you use to filter for documents related to a specific document in the relatedTable.\n\nFor example, if you have an ingredients table where each ingredient is related to a recipe, the recipe ID will be stored on a property called _Recipe on each ingredient. So to find all the ingredients in a certain Recipe you would use the same process as above, but you would getSpecificIngredient and check if _Recipe matched the id of the recipe whose ingredients you were looking for, not _User\n\nAt any point, from your express side code you can run the printHelper method to see all the helpers that will be available to you on the client side\n\nExample:\nvar mongoose = require("mongoose");\nmongoose.connect(\'mongodb://localhost/test3\');\nvar db = mongoose.connection;\n\nvar helper =  require(__dirname + "/APIandDBsetup.js");\nhelper = new helper(app,port);\nvar dbHelper = helper.addDBconnection(mongoose);\ndbHelper.printHelpers();\n//the above will print all the helpers\n\n//EXAMPLE OF CLIENT SIDE AND SERVER SIDE CODE TO SET UP CHAT MESSAGING APP USING HYPERFAST MONGO\n\n**express server side code\n\nvar app = require("express")();\nvar port = 9038;\n\nvar mongoose = require("mongoose");\n\nmongoose.connect(\'mongodb://localhost/test3\');\n\nvar db = mongoose.connection;\n\nvar helper =  require("superfastmongoexpress");\n\nhelper = new helper(app,port);\n\nvar dbHelper = helper.addDBconnection(mongoose);\n\ndbHelper.createSchema(\n\t{\n\t\tUser:{name:"Mike"},\n\t\tMessage:{user:"Mike",message:"I am a dog"},\n\t\tsubMessage:{name:"Brian",message:"This is a test"}\n\t},\n\t{\n\t\tUser:["Message","subMessage"],\n\t\tMessage:["subMessage"]\n\t}\n);\n\napp.get("/",function(req,res){\n\tdbHelper.sendFileWithDBMethods(__dirname + "/test.html",res);\n})\n\napp.listen(port);\n\n\n**html code\n\n<html>\n<head>\n\t<script\n  src="https://code.jquery.com/jquery-3.1.1.js"\n  integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA="\n  crossorigin="anonymous"></script>\n  <script>\n\n  </script>\n</head>\n<body>\n\t<div>\n\t\t<label>Select User</label>\n\t\t<select id ="selector">\n\t\t</select>\n\t</div>\n\t<div>\n\t\t<label> Send Message </label>\n\t\t<input type="text" id="message"></input>\n\t\t<button onclick = "send()">Send</button>\n\t\t<div id="messageHolder"></div>\n\t\t<button onclick = "refresh()">Refresh Messages</button>\n\t</div>\n\t<script>\n\t\t\n\t\t//the code block below uses getAllUsers to append all users to a dropdown list so that the user can select what user they want to post as\n\t\tdb.getAllUsers().forEach(function(user){\n\t\t\tvar userContainer = $("#selector");\n\t\t\tvar newOpt = $("<option></option>")\n\n\t\t\tuserContainer.append("<option val ="+ user.name + ">"+user.name+ "</option>")\n\t\t})\n\n\t\t//the \'send\' function below uses the addMessageforUser helper function to add a new message for the selected user into the database\n\t\tfunction send(){\n\t\t\tvar user = $("#selector").val();\n\t\t\tvar messagetext = $("#message").val();\n\t\t\tdb.addMessageforUser({relatedInfo:{User:{name:user}},toPost:{user:user,message:messagetext}});\n\t\t}\n\n\t\t//the \'refresh\' function uses the getAllMessages function to get All the messages in the database\n\t\t//uses jquery to append to a div on the page\n\t\tfunction refresh(){\n\t\t\tvar messagecontainer = $("#messageHolder")\n\t\t\tmessagecontainer.empty();\n\t\t\tdb.getAllMessages().forEach(function(messageObj){\n\t\t\t\tvar toAdd = $("<p>"+ messageObj.user+" :"+ messageObj.message + "</p>")\n\t\t\t\tmessagecontainer.append(toAdd);\n\t\t\t})\n\t\t}\n\t</script>\n</body>\n</html>',
20 silly publish   readmeFilename: 'README.md',
20 silly publish   gitHead: 'aee600b6477f147b590fcca44d73fff6732a8eee',
20 silly publish   _id: 'superfastmongoexpress@1.0.7',
20 silly publish   _shasum: 'dc6b90f3cb849c2fdc633a25ee42104cd375c5c9',
20 silly publish   _from: '.' }
21 verbose getPublishConfig undefined
22 silly mapToRegistry name superfastmongoexpress
23 silly mapToRegistry using default registry
24 silly mapToRegistry registry https://registry.npmjs.org/
25 silly mapToRegistry data Result {
25 silly mapToRegistry   raw: 'superfastmongoexpress',
25 silly mapToRegistry   scope: null,
25 silly mapToRegistry   name: 'superfastmongoexpress',
25 silly mapToRegistry   rawSpec: '',
25 silly mapToRegistry   spec: 'latest',
25 silly mapToRegistry   type: 'tag' }
26 silly mapToRegistry uri https://registry.npmjs.org/superfastmongoexpress
27 verbose publish registryBase https://registry.npmjs.org/
28 silly publish uploading /Users/jordantaylor/.npm/superfastmongoexpress/1.0.7/package.tgz
29 verbose request uri https://registry.npmjs.org/superfastmongoexpress
30 verbose request sending authorization for write operation
31 info attempt registry request try #1 at 3:36:54 PM
32 verbose request using bearer token for auth
33 verbose request id 603de2344e27520b
34 http request PUT https://registry.npmjs.org/superfastmongoexpress
35 http 403 https://registry.npmjs.org/superfastmongoexpress
36 verbose headers { 'content-type': 'application/json',
36 verbose headers   'cache-control': 'max-age=300',
36 verbose headers   'content-length': '95',
36 verbose headers   'accept-ranges': 'bytes',
36 verbose headers   date: 'Fri, 20 Jan 2017 23:27:38 GMT',
36 verbose headers   via: '1.1 varnish',
36 verbose headers   connection: 'keep-alive',
36 verbose headers   'x-served-by': 'cache-sjc3127-SJC',
36 verbose headers   'x-cache': 'MISS',
36 verbose headers   'x-cache-hits': '0',
36 verbose headers   'x-timer': 'S1484954858.547966,VS0,VE150',
36 verbose headers   vary: 'Accept-Encoding' }
37 verbose request invalidating /Users/jordantaylor/.npm/registry.npmjs.org/superfastmongoexpress on PUT
38 error publish Failed PUT 403
39 verbose stack Error: "You cannot publish over the previously published version 1.0.7." : superfastmongoexpress
39 verbose stack     at makeError (/usr/local/lib/node_modules/npm/node_modules/npm-registry-client/lib/request.js:264:12)
39 verbose stack     at CachingRegistryClient.<anonymous> (/usr/local/lib/node_modules/npm/node_modules/npm-registry-client/lib/request.js:252:14)
39 verbose stack     at Request._callback (/usr/local/lib/node_modules/npm/node_modules/npm-registry-client/lib/request.js:172:14)
39 verbose stack     at Request.self.callback (/usr/local/lib/node_modules/npm/node_modules/request/request.js:200:22)
39 verbose stack     at emitTwo (events.js:87:13)
39 verbose stack     at Request.emit (events.js:172:7)
39 verbose stack     at Request.<anonymous> (/usr/local/lib/node_modules/npm/node_modules/request/request.js:1067:10)
39 verbose stack     at emitOne (events.js:82:20)
39 verbose stack     at Request.emit (events.js:169:7)
39 verbose stack     at IncomingMessage.<anonymous> (/usr/local/lib/node_modules/npm/node_modules/request/request.js:988:12)
40 verbose statusCode 403
41 verbose pkgid superfastmongoexpress
42 verbose cwd /Users/jordantaylor/Desktop/libraries/superfastmongoexpress
43 error Darwin 15.3.0
44 error argv "/usr/local/bin/node" "/usr/local/bin/npm" "publish"
45 error node v4.4.7
46 error npm  v2.15.8
47 error code E403
48 error "You cannot publish over the previously published version 1.0.7." : superfastmongoexpress
49 error If you need help, you may report this error at:
49 error     <https://github.com/npm/npm/issues>
50 verbose exit [ 1, true ]
